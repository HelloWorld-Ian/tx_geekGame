"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}
/*
 * @Author: geek
 * @LastEditors: geek
 * @Description: 入口文件
 * @Src: https://geek.qq.com/tetris/js/main.js (编译前的源文件)
 */
(function(global){var Vue=global.Vue;var viewportRatio=.6;var fontSzieBase=1.5;var resizeHandler=function resizeHandler(){var $app=document.querySelector("#app");var ratio=global.innerWidth/global.innerHeight;var cssText="";if(ratio<viewportRatio){cssText+="width: ".concat(global.innerWidth,"px;");cssText+="height: ".concat(global.innerWidth/viewportRatio,"px;");cssText+="font-size: ".concat(fontSzieBase/viewportRatio,"vw;")}else{cssText+="width: ".concat(global.innerHeight*viewportRatio,"px;");cssText+="height: ".concat(global.innerHeight,"px;");cssText+="font-size: ".concat(fontSzieBase,"vh;")}$app.style.cssText=cssText};global.addEventListener("resize",resizeHandler);resizeHandler();var lastTouchEnd=0;document.addEventListener("touchend",function(e){var now=(new Date).getTime();if(now-lastTouchEnd<=500){e.preventDefault()}lastTouchEnd=now},false);var yunPlusActivityUrl="https://cloud.tencent.com/developer/competition/introduction/10015";var mkActivityUrl="https://mk.woa.com/contest/40/rule";var isMobile="ontouchend"in document;var isInternal=location.hostname!=="geek.qq.com";var internalChannelName="腾讯员工赛道";var internalEntryUrl=isMobile?"https://oa.m.tencent.com/an:llvis/tetris/#/game":"https://geek.oa.com/tetris/#/game";var externalChannelName="全国赛道";var externalEntryUrl="".concat(yunPlusActivityUrl).concat(isMobile?"":"/result");var ruleUrl=isInternal?mkActivityUrl:yunPlusActivityUrl;var pageInfo={isMobile:isMobile,isInternal:isInternal,channel:isInternal?internalChannelName:externalChannelName,gameUrl:isInternal?internalEntryUrl:externalEntryUrl,internalChannelName:internalChannelName,internalEntryUrl:internalEntryUrl,externalChannelName:externalChannelName,externalEntryUrl:externalEntryUrl,ruleUrl:ruleUrl};global.pageInfo=pageInfo;var kvParse=function kvParse(){var src=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var name=arguments.length>1?arguments[1]:undefined;var sep=arguments.length>2&&arguments[2]!==undefined?arguments[2]:";";var pairs=src.split(sep);var ret={};pairs.forEach(function(pair){var _pair$trim$split=pair.trim().split("="),_pair$trim$split2=_slicedToArray(_pair$trim$split,2),k=_pair$trim$split2[0],v=_pair$trim$split2[1];if(k){ret[k]=v}});return ret[name]||""};var getUser=function getUser(){if(location.hostname==="geek.qq.com"){return kvParse(decodeURIComponent(kvParse(document.cookie,"userInfo")),"uid","&")}return kvParse(document.cookie,"geek-user")};global.user=getUser();var srcChannel=kvParse((location.hash.split("?")||["",""])[1],"channel","&");if(srcChannel){try{localStorage.setItem("SRC_CHANNEL",srcChannel)}catch(e){}}else{try{srcChannel=localStorage.getItem("SRC_CHANNEL")||""}catch(e){}}var beacon=new global.BeaconAction({appkey:location.hostname==="localhost"?"0WEB0F4AFG41OC1Z-test":"0WEB0F4AFG41OC1Z",versionCode:"1.0.0",strictMode:false,onReportSuccess:function onReportSuccess(e){console.log("onReportSuccess : ".concat(e))},onReportFail:function onReportFail(e){console.log("onReportFail : ".concat(e))}});beacon.addAdditionalParams({user_name:global.user||"",channel:pageInfo.channel,src_channel:srcChannel});global.beacon=beacon;var PageIntro=global.PageIntro,PageGame=global.PageGame,VueRouter=global.VueRouter;var routes=[{path:"/",name:"Intro",component:PageIntro,meta:{pageCnName:"首页"}},{path:"/intro",name:"Intro",component:PageIntro,meta:{pageCnName:"首页"}},{path:"/game",name:"Game",component:PageGame,meta:{pageCnName:"游戏页"}}];var router=new VueRouter({base:location.hostname==="localhost"?"/":"/tetris",routes:routes});router.afterEach(function(to){var pageName=to.meta.pageCnName||"unknown";beacon.onDirectUserAction("page_view",{page_name:pageName})});new Vue({router:router}).$mount("#app")})(window);